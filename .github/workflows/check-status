name: View All GitHub Action Status

on:
  pull_request:
    types: 
      opened

jobs:
  view-status:
    runs-on: ubuntu-latest

    steps:
    - name: Display workflow statuses
      run: |
        echo "Workflow statuses:"
        for job in $(jq -r '.check_runs[] | select(.head_sha == env.GITHUB_SHA) | .name' $GITHUB_EVENT_PATH); do
          status=$(jq -r --arg job "$job" '.check_runs[] | select(.head_sha == env.GITHUB_SHA and .name == $job) | .conclusion' $GITHUB_EVENT_PATH)
          echo "$job: $status"
        done
